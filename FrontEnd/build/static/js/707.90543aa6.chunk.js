"use strict";(self.webpackChunkberry_free_material_react_cra=self.webpackChunkberry_free_material_react_cra||[]).push([[707],{58707:function(e,t,o){o.r(t),o.d(t,{default:function(){return k}});var r=o(47313),n=o(47825),s=o(42832),i=o(61113),l=o(41806),a=o(61682),d=o(2e3),c=o(14298),u=o(10306),m=o(7894),h=o(16759),p=o(17551),x=o(31095),g=o(51405),j=o(5211),Z=o(29428),b=o(46417);const v=(0,m.Z)((e=>(0,b.jsx)(h.Z,{elevation:0,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},...e})))((e=>{let{theme:t}=e;return{"& .MuiPaper-root":{borderRadius:6,marginTop:t.spacing(1),minWidth:100,boxShadow:"rgb(255, 255, 255) 0px 0px 0px 0px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px, rgba(0, 0, 0, 0.1) 0px 10px 15px -3px, rgba(0, 0, 0, 0.05) 0px 4px 6px -2px","& .MuiMenu-list":{padding:"4px 0"},"& .MuiMenuItem-root":{"& .MuiSvgIcon-root":{fontSize:18,color:t.palette.text.secondary,marginRight:t.spacing(1.5)},"&:active":{backgroundColor:(0,p.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity)}}}}}));var y=e=>{const[t,o]=(0,r.useState)(null),n=Boolean(t);return(0,b.jsx)("div",{children:(0,b.jsxs)(s.Z,{direction:"row",spacing:2,justifyContent:"flex-end",children:[(0,b.jsx)(x.Z,{id:"action","aria-controls":n?"action":void 0,"aria-haspopup":"true","aria-expanded":n?"true":void 0,variant:"contained",color:"primary",disableElevation:!0,onClick:e=>{o(e.currentTarget)},endIcon:(0,b.jsx)(Z.Z,{}),children:"Add New"}),(0,b.jsxs)(v,{id:"demo-customized-menu",MenuListProps:{"aria-labelledby":"action"},anchorEl:t,open:n,onClose:()=>{o(null)},children:[(0,b.jsxs)(g.Z,{onClick:e.handleOpenTask,disableRipple:!0,children:[(0,b.jsx)(j.Z,{}),"Add Task"]}),(0,b.jsxs)(g.Z,{onClick:e.handleOpenMeeting,disableRipple:!0,children:[(0,b.jsx)(j.Z,{}),"Add Meeting"]}),(0,b.jsxs)(g.Z,{onClick:e.handleOpenCall,disableRipple:!0,children:[(0,b.jsx)(j.Z,{}),"Add Call"]})]})]})})},f=o(12581),C=o(17213),T=o(8);function S(e){return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("b",{children:e.timeText}),(0,b.jsx)("i",{children:e.event.title})]})}const N=[{title:"Meeting Time",start:new Date}];var k=()=>{const[e,t]=(0,r.useState)(!1),[o,m]=(0,r.useState)(!1),[h,p]=(0,r.useState)(!1);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(f.Z,{open:e,handleClose:()=>t(!1),lead:"lead",contact:"contact"}),(0,b.jsx)(T.Z,{open:o,handleClose:()=>m(!1)}),(0,b.jsx)(C.Z,{open:h,handleClose:()=>p(!1)}),(0,b.jsxs)(n.Z,{children:[(0,b.jsxs)(s.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",mb:5,children:[(0,b.jsx)(i.Z,{variant:"h4",children:"Calendar"}),(0,b.jsx)(y,{handleOpenTask:()=>t(!0),handleOpenMeeting:()=>m(!0),handleOpenCall:()=>p(!0)})]}),(0,b.jsx)(l.Z,{sx:{background:"white"},children:(0,b.jsx)(a.Z,{plugins:[d.Z,c.Z,u.ZP],initialView:"dayGridMonth",minHeight:"400px",height:"600px",events:N,eventContent:S,headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},views:{listWeek:{buttonText:"List"},multiMonthFourMonth:{type:"multiMonth",buttonText:"multiMonth",duration:{months:4}}},buttonText:{today:"Today",dayGridMonth:"Month",timeGridWeek:"Week",timeGridDay:"Day"},eventClassNames:"custom-fullcalendar"})})]})]})}},17213:function(e,t,o){var r=o(47313),n=o(31095),s=o(66149),i=o(4117),l=o(96467),a=o(33604),d=o(61113),c=o(9019),u=o(24631),m=o(23195),h=o(79429),p=o(5178),x=o(41727),g=o(47131),j=o(48310),Z=o(67216),b=o(88797),v=o(51405),y=o(15480),f=o(99608),C=o(38475),T=o(70816),S=o.n(T),N=o(68507),k=o(46417);t.Z=e=>{const{open:t,handleClose:o,hostelId:T,editComplaint:P}=e;console.log("props====>",e);const D="http://146.190.107.141:4000",[w,M]=(0,r.useState)([]),[$,_]=(0,r.useState)([]),[A,F]=(0,r.useState)(""),[R,z]=(0,r.useState)(""),[E,W]=(0,r.useState)("");(0,r.useEffect)((()=>{t&&(console.log("URL =>",`${D}/sudent_reservation/index/${T}`),C.Z.get(`${D}/sudent_reservation/index/${T}`).then((e=>{console.log("in hook =>",e);const t=e.data.result.filter((e=>"deactive"!==e.status)).map((e=>({studentName:e.studentName,studentPhoneNo:e.studentPhoneNo})));M(t)})).catch((e=>{console.log("Error fetching student data",e)})))}),[t,T]),console.log("studentList  ==>",w),(0,r.useEffect)((()=>{if(console.log("Filtering students with phone number input:",A),A){console.log("inputValue======>",A);const e=w.filter((e=>{var t;return(null===(t=e.studentPhoneNo)||void 0===t?void 0:t.toString()).includes(A)}));console.log("Filtered students:",e),_(e)}else _([])}),[A,w]),(0,r.useEffect)((()=>{t||(O.resetForm(),F(""),z(""),W(""))}),[t]);(0,r.useEffect)((()=>{if(t&&P){const e=S()(P.datetime).format("YYYY-MM-DDTHH:mm");O.setValues({studentName:P.studentName||"",datetime:e||"",problemDescription:P.problemDescription||"",status:P.status||""})}}),[t,P]);const O=(0,h.TA)({initialValues:{studentName:"",studentPhoneNo:"",datetime:"",problemDescription:"",status:"register"},validationSchema:f.X6,onSubmit:async e=>{console.log("Form values:====>",e);try{let t;P?(console.log("URL=>",`${D}/student_complaint/edit/${P._id}`),t=await C.Z.put(`${D}/student_complaint/edit/${P._id}`,e,{headers:{Authorization:`Bearer ${N.Z.get("Admin_Token")}`}})):(console.log("URL=>",`${D}/student_complaint/add/${T}`),t=await C.Z.post(`${D}/student_complaint/add/${T}`,e,{headers:{Authorization:`Bearer ${N.Z.get("Admin_Token")}`}})),console.log("response==>",t),201===t.status||200===t.status?(console.log("Complaint Add Successfully !!"),o()):console.error("Failed to save data")}catch(t){console.log("Error Found",t)}}});return(0,k.jsx)("div",{children:(0,k.jsxs)(s.Z,{open:t,onClose:o,"aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description",children:[(0,k.jsxs)(a.Z,{id:"scroll-dialog-title",style:{display:"flex",justifyContent:"space-between"},children:[(0,k.jsx)(d.Z,{variant:"h6",children:"Resident Complaint"}),(0,k.jsx)(d.Z,{children:(0,k.jsx)(m.Z,{onClick:o,style:{cursor:"pointer"}})})]}),(0,k.jsx)(l.Z,{dividers:!0,children:(0,k.jsx)("form",{children:(0,k.jsxs)(c.ZP,{container:!0,rowSpacing:3,columnSpacing:{xs:0,sm:5,md:4},children:[(0,k.jsxs)(c.ZP,{item:!0,xs:12,sm:6,md:6,children:[(0,k.jsx)(p.Z,{children:"Students List"}),(0,k.jsx)(u.Z,{id:"studentName",name:"studentName",size:"small",fullWidth:!0,value:A,onChange:e=>{F(e.target.value),z(""),W("")},placeholder:"Enter Phone Number",InputProps:{endAdornment:(0,k.jsx)(x.Z,{position:"end",children:(0,k.jsx)(g.Z,{onClick:()=>F(""),children:(0,k.jsx)(m.Z,{})})})},error:O.touched.studentName&&!!O.errors.studentName,helperText:O.touched.studentName&&O.errors.studentName}),$.length>0&&(0,k.jsx)(j.Z,{style:{border:"1px solid #ddd",marginTop:4},children:$.map((e=>(0,k.jsxs)(Z.ZP,{onClick:()=>{return t=e.studentName,o=e.studentPhoneNo,z(t),W(o),F(t),O.setFieldValue("studentName",t),O.setFieldValue("studentPhoneNo",o),void _([]);var t,o},style:{cursor:"pointer"},children:[e.studentName," - ",e.studentPhoneNo]},e.studentPhoneNo)))})]}),(0,k.jsxs)(c.ZP,{item:!0,xs:12,sm:6,md:6,children:[(0,k.jsx)(p.Z,{children:"Date and Time"}),(0,k.jsx)(u.Z,{id:"datetime",name:"datetime",type:"datetime-local",size:"small",fullWidth:!0,value:O.values.datetime,onChange:O.handleChange,error:O.touched.datetime&&!!O.errors.datetime,helperText:O.touched.datetime&&O.errors.datetime})]}),(0,k.jsxs)(c.ZP,{item:!0,xs:12,children:[(0,k.jsx)(p.Z,{children:"Status"}),(0,k.jsxs)(b.Z,{id:"status",name:"status",size:"small",fullWidth:!0,value:O.values.status,onChange:O.handleChange,error:O.touched.status&&!!O.errors.status,helperText:O.touched.status&&O.errors.status,children:[(0,k.jsx)(v.Z,{value:"",children:"Select Status"}),(0,k.jsx)(v.Z,{value:"register",children:"Register"}),(0,k.jsx)(v.Z,{value:"in progress",children:"In Progress"}),(0,k.jsx)(v.Z,{value:"complete",children:"Complete"})]}),O.touched.status&&O.errors.status?(0,k.jsx)(y.Z,{error:!0,children:O.errors.status}):null]}),(0,k.jsxs)(c.ZP,{item:!0,xs:12,children:[(0,k.jsx)(p.Z,{children:"Problem Description"}),(0,k.jsx)(u.Z,{id:"problemDescription",name:"problemDescription",size:"small",fullWidth:!0,multiline:!0,rows:4,value:O.values.problemDescription,onChange:O.handleChange,error:O.touched.problemDescription&&!!O.errors.problemDescription,helperText:O.touched.problemDescription&&O.errors.problemDescription})]})]})})}),(0,k.jsxs)(i.Z,{children:[(0,k.jsx)(n.Z,{type:"submit",variant:"contained",onClick:O.handleSubmit,style:{textTransform:"capitalize"},color:"secondary",children:"Save"}),(0,k.jsx)(n.Z,{type:"reset",variant:"outlined",style:{textTransform:"capitalize"},onClick:()=>{O.resetForm(),o()},color:"error",children:"Cancel"})]})]})})}},12581:function(e,t,o){var r=o(47313),n=o(31095),s=o(66149),i=o(4117),l=o(96467),a=o(33604),d=o(15480),c=o(5178),u=o(9019),m=o(51405),h=o(88797),p=o(24631),x=o(61113),g=o(23195),j=o(79429),Z=o(99608),b=o(38475),v=o(68507),y=o(34491),f=o(46417);t.Z=e=>{const t="http://146.190.107.141:4000",{open:o,handleClose:C,hostelId:T,editRoom:S}=e;console.log("props===>",e);const N=(0,j.TA)({initialValues:{roomNumber:"",roomType:"",roomphoto:""},validationSchema:Z.cj,onSubmit:async e=>{console.log("Form values ====>",e);const o=new FormData;Object.keys(e).forEach((t=>{if("roomphoto"===t)for(let r=0;r<e.roomphoto.length;r++)o.append("roomphoto",e.roomphoto[r]);else o.append(t,e[t])}));for(let[t,n]of o.entries())console.log(`formData==> ${t}: ${n}`);try{let e;e=S?await b.Z.put(`${t}/room/edit/${S._id}`,o,{headers:{Authorization:`Bearer ${v.Z.get("Admin_Token")}`,"Content-Type":"multipart/form-data"}}):await b.Z.post(`${t}/room/add/${T}`,o,{headers:{Authorization:`Bearer ${v.Z.get("Admin_Token")}`,"Content-Type":"multipart/form-data"}}),console.log("response====>",e),201===e.status||200===e.status?(console.log("Room Details Added Successfully !!"),C(),y.Am.success("Room added successfully !!")):(y.Am.error("Can not add room !!"),console.error("Failed to save data"))}catch(r){console.log("Error=>",r)}}});return(0,r.useEffect)((()=>{o&&S&&N.setValues({roomNumber:S.roomNumber||"",roomType:S.roomType||"",roomphoto:S.roomphoto.name||""})}),[o,S]),(0,r.useEffect)((()=>{o&&!S&&N.resetForm()}),[o]),(0,f.jsx)("div",{children:(0,f.jsxs)(s.Z,{open:o,onClose:C,"aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description",children:[(0,f.jsxs)(a.Z,{id:"scroll-dialog-title",style:{display:"flex",justifyContent:"space-between"},children:[(0,f.jsx)(x.Z,{variant:"h6",children:"Room Basic Details"}),(0,f.jsx)(x.Z,{children:(0,f.jsx)(g.Z,{onClick:C,style:{cursor:"pointer"}})})]}),(0,f.jsx)(l.Z,{dividers:!0,children:(0,f.jsxs)("form",{onSubmit:N.handleSubmit,children:[(0,f.jsxs)(u.ZP,{container:!0,rowSpacing:3,columnSpacing:{xs:0,sm:5,md:4},children:[(0,f.jsxs)(u.ZP,{item:!0,xs:12,sm:6,md:6,children:[(0,f.jsx)(c.Z,{children:"Room Number"}),(0,f.jsx)(p.Z,{id:"roomNumber",name:"roomNumber",size:"small",fullWidth:!0,value:N.values.roomNumber,onChange:N.handleChange,error:N.touched.roomNumber&&!!N.errors.roomNumber,helperText:N.touched.roomNumber&&N.errors.roomNumber})]}),(0,f.jsxs)(u.ZP,{item:!0,xs:12,sm:6,md:6,children:[(0,f.jsx)(c.Z,{children:"Room Type"}),(0,f.jsxs)(h.Z,{id:"roomType",name:"roomType",size:"small",fullWidth:!0,value:N.values.roomType,onChange:N.handleChange,children:[(0,f.jsx)(m.Z,{value:"",children:"Select Room Type"}),(0,f.jsx)(m.Z,{value:"Single Seater",children:"Single Seater"}),(0,f.jsx)(m.Z,{value:"Double Seater",children:"Double Seater"}),(0,f.jsx)(m.Z,{value:"Three Seater",children:"Three Seater"})]}),N.touched.roomType&&N.errors.roomType?(0,f.jsx)(d.Z,{error:!0,children:N.errors.roomType}):null]}),(0,f.jsxs)(u.ZP,{item:!0,xs:12,sm:6,md:6,children:[(0,f.jsx)(c.Z,{children:"Select Multiple Room Photo"}),(0,f.jsx)("input",{id:"roomphoto",name:"roomphoto",type:"file",multiple:!0,onChange:e=>{const t=Array.from(e.currentTarget.files);N.setFieldValue("roomphoto",t)}}),N.touched.roomphoto&&N.errors.roomphoto&&(0,f.jsx)(d.Z,{error:!0,children:N.errors.roomphoto})]})]}),(0,f.jsxs)(i.Z,{children:[(0,f.jsx)(n.Z,{onClick:N.handleSubmit,variant:"contained",color:"primary",type:"submit",children:"Save"}),(0,f.jsx)(n.Z,{onClick:()=>{C()},variant:"outlined",color:"error",children:"Cancel"})]})]})})]})})}}}]);